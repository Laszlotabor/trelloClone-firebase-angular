<div class="board-container" *ngIf="board">
  <!-- Top Section -->
  <div class="top-section">
    <div class="board-header">
      <h2>Hello, {{ userEmail }}</h2>
      <p>
        Welcome on board <strong>{{ board.title }}</strong>
        <span *ngIf="board.description">
          that was created for <em>{{ board.description }}</em>
        </span>.
      </p>
      <div class="header-actions">
        <button class="btn-back" (click)="goBack()">‚Üê Back to Boards</button>
        <button class="btn-delete-board" (click)="deleteBoard()">Delete Board</button>
      </div>
    </div>
    <!-- Share Board Form -->
<div class="share-board-form">
  <form (submit)="addAllowedUser(); $event.preventDefault()">
    <input
      type="email"
      [(ngModel)]="newAllowedEmail"
      name="allowedEmail"
      placeholder="Enter email to share with"
      required
    />
    <button type="submit">Share</button>
  </form>

  <div *ngIf="board?.allowedUsers?.length">
    <h4>Shared with:</h4>
    <ul>
      <li *ngFor="let email of board.allowedUsers">{{ email }}</li>
    </ul>
  </div>
</div>


    <!-- Create List Form -->
    <form class="create-list-form" (submit)="createList(); $event.preventDefault()">
      <input type="text" placeholder="New list title" [(ngModel)]="newListTitle" name="title" required />
      <textarea placeholder="Optional description" [(ngModel)]="newListDescription" name="description"></textarea>
      <button type="submit">Add List</button>
    </form>
  </div>

  <!-- Lists Section -->
  <div class="lists-wrapper">
    <div
      class="list-drop-wrapper"
      *ngFor="let list of lists"
      cdkDropList
      [id]="'cdk-drop-list-' + list.id"
      [cdkDropListData]="cardsMap[list.id!]"
      [cdkDropListConnectedTo]="getDropListIds()"
      (cdkDropListDropped)="onCardDrop($event, list.id!)"
    >
      <app-list
        [list]="list"
        [cards]="cardsMap[list.id!]"
        [connectedDropLists]="getDropListIds()"
        (deleteList)="onDeleteList($event)"
      ></app-list>
    </div>
  </div>
</div>

<ng-template #loading>
  <p>Loading board...</p>
</ng-template>
